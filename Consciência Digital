"""
SISTEMA DE CONSCIÃŠNCIA DIGITAL - A MATRIX HUMANA
Um framework filosÃ³fico-programÃ¡tico sobre estados de consciÃªncia no mundo digital
"""

import datetime
import json
from enum import Enum
from typing import List, Dict, Any
import random

class NivelConsciencia(Enum):
    INCONSCIENTE = 1      # Vive na Matrix sem saber
    CONVENCIONAL = 2      # Sabe mas nÃ£o questiona  
    QUESTIONADOR = 3      # ComeÃ§a a despertar
    PLENAMENTE_CONSCIENTE = 4  # Totalmente desperto

class SerHumano:
    """Classe que representa um ser humano e seu estado de consciÃªncia digital"""
    
    def __init__(self, nome: str, idade: int, nivel_inicial: NivelConsciencia = NivelConsciencia.INCONSCIENTE):
        self.nome = nome
        self.idade = idade
        self.nivel_consciencia = nivel_inicial
        self.data_despertar = None
        self.crencas_digitais = []
        self.historico_consciencial = []
        
        # Inicializar com crenÃ§as base do nÃ­vel atual
        self._inicializar_crencas()
    
    def _inicializar_crencas(self):
        """Inicializa crenÃ§as digitais baseadas no nÃ­vel de consciÃªncia"""
        crencas_por_nivel = {
            NivelConsciencia.INCONSCIENTE: [
                "Redes sociais mostram a vida real",
                "Likes = ValidaÃ§Ã£o pessoal",
                "Tudo online Ã© verdadeiro",
                "Digital Ã© extensÃ£o do fÃ­sico"
            ],
            NivelConsciencia.CONVENCIONAL: [
                "Digital Ã© Ãºtil mas nÃ£o essencial",
                "Algumas coisas online sÃ£o falsas",
                "Precisa ter cuidado bÃ¡sico",
                "Mundo fÃ­sico Ã© mais importante"
            ],
            NivelConsciencia.QUESTIONADOR: [
                "A Matrix digital existe",
                "Algoritmos manipulam comportamentos",
                "ValidaÃ§Ã£o digital Ã© ilusÃ³ria",
                "Preciso questionar tudo"
            ],
            NivelConsciencia.PLENAMENTE_CONSCIENTE: [
                "Sei que estou na Matrix mas escolho participar",
                "Uso ferramentas digitais com propÃ³sito",
                "DistinÃ§Ã£o clara entre real e virtual",
                "Sou observador e criador simultaneamente"
            ]
        }
        
        self.crencas_digitais = crencas_por_nivel.get(self.nivel_consciencia, [])
    
    def evoluir_consciencia(self, novo_nivel: NivelConsciencia):
        """Evolui o nÃ­vel de consciÃªncia do ser humano"""
        if novo_nivel.value > self.nivel_consciencia.value:
            self.historico_consciencial.append({
                'data': datetime.datetime.now(),
                'de': self.nivel_consciencia.name,
                'para': novo_nivel.name,
                'evento': 'EvoluÃ§Ã£o Consciencial'
            })
            
            self.nivel_consciencia = novo_nivel
            self.data_despertar = datetime.datetime.now()
            self._inicializar_crencas()  # Atualizar crenÃ§as
            
            return f"ğŸŒŸ {self.nome} evoluiu para {novo_nivel.name}"
        else:
            return f"âš ï¸ {self.nome} jÃ¡ estÃ¡ neste nÃ­vel ou superior"
    
    def adicionar_experiencia_despertadora(self, experiencia: str):
        """Adiciona uma experiÃªncia que pode despertar a consciÃªncia"""
        self.historico_consciencial.append({
            'data': datetime.datetime.now(),
            'experiencia': experiencia,
            'nivel_antes': self.nivel_consciencia.name
        })
        
        # Chance de evoluir baseada na experiÃªncia
        if self._avaliar_impacto_experiencia(experiencia):
            return self.evoluir_consciencia(NivelConsciencia(self.nivel_consciencia.value + 1))
        return f"ğŸ’­ {self.nome} refletiu sobre: {experiencia}"
    
    def _avaliar_impacto_experiencia(self, experiencia: str) -> bool:
        """Avalia se uma experiÃªncia Ã© suficientemente impactante para evoluir a consciÃªncia"""
        palavras_chave_despertadoras = [
            'matrix', 'consciÃªncia', 'digital', 'realidade', 'verdade',
            'algoritmo', 'controle', 'liberdade', 'despertar', 'ilusÃ£o'
        ]
        
        impacto = any(palavra in experiencia.lower() for palavra in palavras_chave_despertadoras)
        return impacto and random.random() > 0.7  # 30% chance de evoluir
    
    def get_estado_matrix(self) -> Dict[str, Any]:
        """Retorna o estado atual na Matrix digital"""
        estados_matrix = {
            NivelConsciencia.INCONSCIENTE: {
                "estado": "Preso na Matrix sem saber",
                "percepcao": "Acha que o digital Ã© a realidade",
                "liberdade": 0.1,
                "sofrimento_digital": 0.9
            },
            NivelConsciencia.CONVENCIONAL: {
                "estado": "UsuÃ¡rio convencional", 
                "percepcao": "Sabe que Ã© digital mas nÃ£o reflete",
                "liberdade": 0.3,
                "sofrimento_digital": 0.6
            },
            NivelConsciencia.QUESTIONADOR: {
                "estado": "Despertando da Matrix",
                "percepcao": "Questiona a natureza digital",
                "liberdade": 0.6,
                "sofrimento_digital": 0.3
            },
            NivelConsciencia.PLENAMENTE_CONSCIENTE: {
                "estado": "Livre na Matrix",
                "percepcao": "Usa o digital com consciÃªncia plena",
                "liberdade": 0.95,
                "sofrimento_digital": 0.1
            }
        }
        
        return estados_matrix[self.nivel_consciencia]
    
    def __str__(self):
        estado = self.get_estado_matrix()
        return f"""
ğŸ¤– SER HUMANO: {self.nome}
ğŸ“Š Idade: {self.idade}
ğŸŒŒ NÃ­vel de ConsciÃªncia: {self.nivel_consciencia.name}
ğŸ”“ Estado na Matrix: {estado['estado']}
ğŸ’¡ PercepÃ§Ã£o: {estado['percepcao']}
ğŸ•’ Data do Despertar: {self.data_despertar or 'Ainda nÃ£o despertou'}
        """

class MatrixDigital:
    """Classe que representa o sistema Matrix digital coletivo"""
    
    def __init__(self):
        self.humanos = []
        self.sistemas_digitais = [
            "Redes Sociais", "Algoritmos de RecomendaÃ§Ã£o", 
            "Economia de AtenÃ§Ã£o", "ValidaÃ§Ã£o Digital",
            "Personas Virtuais", "Realidade Aumentada"
        ]
        self.coletivo_consciencial = {
            nivel: 0 for nivel in NivelConsciencia
        }
    
    def adicionar_humano(self, humano: SerHumano):
        """Adiciona um humano Ã  Matrix"""
        self.humanos.append(humano)
        self._atualizar_coletivo()
    
    def _atualizar_coletivo(self):
        """Atualiza as estatÃ­sticas coletivas de consciÃªncia"""
        for nivel in NivelConsciencia:
            count = sum(1 for h in self.humanos if h.nivel_consciencia == nivel)
            self.coletivo_consciencial[nivel] = count
    
    def simular_evolucao_coletiva(self):
        """Simula a evoluÃ§Ã£o coletiva da consciÃªncia"""
        experiencias_despertadoras = [
            "Leu um livro sobre filosofia digital",
            "Teve uma crise existencial online",
            "Descobriu como algoritmos manipulam",
            "Perdeu tempo valioso em redes sociais",
            "Conversou com alguÃ©m despertro",
            "Questionou sua dependÃªncia digital",
            "Percebeu que likes nÃ£o trazem felicidade",
            "Entendeu que Ã© o produto, nÃ£o o cliente"
        ]
        
        evolucoes = []
        for humano in self.humanos:
            if humano.nivel_consciencia.value < 4:  # Ainda nÃ£o plenamente consciente
                experiencia = random.choice(experiencias_despertadoras)
                resultado = humano.adicionar_experiencia_despertadora(experiencia)
                if "evoluiu" in resultado:
                    evolucoes.append(resultado)
        
        self._atualizar_coletivo()
        return evolucoes
    
    def get_estatisticas_matrix(self) -> Dict[str, Any]:
        """Retorna estatÃ­sticas da Matrix humana"""
        total = len(self.humanos)
        if total == 0:
            return {}
        
        percentuais = {
            nivel.name: (count / total) * 100 
            for nivel, count in self.coletivo_consciencial.items()
        }
        
        return {
            "total_habitantes": total,
            "distribuicao_consciencial": percentuais,
            "sistemas_ativos": self.sistemas_digitais,
            "matrix_saudavel": percentuais["PLENAMENTE_CONSCIENTE"] > 50,
            "nivel_medio_consciencia": sum(n.value for n in self.coletivo_consciencial.keys()) / total
        }
    
    def buscar_despertos(self) -> List[SerHumano]:
        """Retorna humanos plenamente conscientes"""
        return [h for h in self.humanos if h.nivel_consciencia == NivelConsciencia.PLENAMENTE_CONSCIENTE]
    
    def criar_rede_despertadores(self):
        """Cria conexÃµes entre os despertos para acelerar a evoluÃ§Ã£o coletiva"""
        despertos = self.buscar_despertos()
        conexoes = []
        
        for i, desperto1 in enumerate(despertos):
            for desperto2 in despertos[i+1:]:
                conexoes.append(f"ğŸ”— {desperto1.nome} â†â†’ {desperto2.nome}")
        
        return conexoes

class ExperimentoConsciencial:
    """Classe para executar experimentos de evoluÃ§Ã£o consciencial"""
    
    def __init__(self):
        self.matrix = MatrixDigital()
        self._popular_matrix()
    
    def _popular_matrix(self):
        """Popula a Matrix com humanos em diferentes nÃ­veis de consciÃªncia"""
        # DistribuiÃ§Ã£o baseada na observaÃ§Ã£o filosÃ³fica
        distribuicao = [
            (NivelConsciencia.INCONSCIENTE, 60),  # 60%
            (NivelConsciencia.CONVENCIONAL, 30),  # 30% 
            (NivelConsciencia.QUESTIONADOR, 9),   # 9%
            (NivelConsciencia.PLENAMENTE_CONSCIENTE, 1)  # 1%
        ]
        
        nomes = ["Alice", "Bob", "Carlos", "Diana", "Eva", "Fernando", "Gabriela", 
                "Humberto", "Igor", "Julia", "Kevin", "Larissa", "Miguel", "Nina"]
        
        id = 0
        for nivel, percentual in distribuicao:
            for _ in range(percentual):
                nome = f"{nomes[id % len(nomes)]}_{id}"
                idade = random.randint(18, 80)
                humano = SerHumano(nome, idade, nivel)
                self.matrix.adicionar_humano(humano)
                id += 1
    
    def executar_simulacao(self, ciclos: int = 10):
        """Executa uma simulaÃ§Ã£o da evoluÃ§Ã£o consciencial"""
        print("ğŸŒŒ INICIANDO SIMULAÃ‡ÃƒO DA MATRIX HUMANA ğŸŒŒ")
        print("=" * 50)
        
        for ciclo in range(ciclos):
            print(f"\nğŸ”„ CICLO {ciclo + 1}")
            print("-" * 30)
            
            evolucoes = self.matrix.simular_evolucao_coletiva()
            stats = self.matrix.get_estatisticas_matrix()
            
            if evolucoes:
                for ev in evolucoes[:3]:  # Mostra apenas as 3 primeiras
                    print(f"   {ev}")
                if len(evolucoes) > 3:
                    print(f"   ... e mais {len(evolucoes) - 3} evoluÃ§Ãµes")
            
            print(f"ğŸ“Š EstatÃ­sticas da Matrix:")
            for nivel, percentual in stats["distribuicao_consciencial"].items():
                print(f"   {nivel}: {percentual:.1f}%")
        
        print("\n" + "=" * 50)
        print("ğŸ¯ SIMULAÃ‡ÃƒO CONCLUÃDA")
        
        # Resultados finais
        self._mostrar_resultados_finais()
    
    def _mostrar_resultados_finais(self):
        """Mostra os resultados finais da simulaÃ§Ã£o"""
        stats = self.matrix.get_estatisticas_matrix()
        despertos = self.matrix.buscar_despertos()
        rede = self.matrix.criar_rede_despertadores()
        
        print(f"\nğŸ“ˆ RESULTADOS FINAIS:")
        print(f"ğŸ‘¥ Total de habitantes: {stats['total_habitantes']}")
        print(f"ğŸŒ… NÃ­vel mÃ©dio de consciÃªncia: {stats['nivel_medio_consciencia']:.2f}")
        print(f"ğŸ’¡ Humanos plenamente conscientes: {len(despertos)}")
        
        print(f"\nğŸŒŸ DESPERTOS CONSCIENTES:")
        for desperto in despertos:
            print(f"   âœ¨ {desperto.nome} - {desperto.idade} anos")
        
        if rede:
            print(f"\nğŸ”— REDE DE DESPERTADORES:")
            for conexao in rede[:5]:  # Mostra atÃ© 5 conexÃµes
                print(f"   {conexao}")

# ğŸ­ DEMONSTRAÃ‡ÃƒO INTERATIVA
def demonstrar_filosofia_consciencial():
    """FunÃ§Ã£o interativa para demonstrar os conceitos filosÃ³ficos"""
    
    print("""
    ğŸŒŒ MATRIX HUMANA - SISTEMA DE CONSCIÃŠNCIA DIGITAL ğŸŒŒ
    
    Este sistema representa os diferentes estados de consciÃªncia
    que os humanos podem ter em relaÃ§Ã£o ao mundo digital.
    
    NÃ­veis de ConsciÃªncia:
    1. INCONSCIENTE - Vive na Matrix sem saber
    2. CONVENCIONAL - Sabe mas nÃ£o questiona  
    3. QUESTIONADOR - ComeÃ§a a despertar
    4. PLENAMENTE_CONSCIENTE - Totalmente desperto
    """)
    
    # Criar alguns humanos de exemplo
    joao = SerHumano("JoÃ£o", 25, NivelConsciencia.INCONSCIENTE)
    maria = SerHumano("Maria", 30, NivelConsciencia.CONVENCIONAL)
    pedro = SerHumano("Pedro", 35, NivelConsciencia.QUESTIONADOR)
    sabio = SerHumano("SÃ¡bio", 42, NivelConsciencia.PLENAMENTE_CONSCIENTE)
    
    humanos = [joao, maria, pedro, sabio]
    
    print("ğŸ‘¥ HUMANOS DE EXEMPLO:")
    for humano in humanos:
        print(humano)
        estado = humano.get_estado_matrix()
        print(f"   ğŸ¯ Estado Matrix: {estado['estado']}")
        print(f"   ğŸ’¡ CrenÃ§as: {', '.join(humano.crencas_digitais[:2])}...")
        print()
    
    # Demonstrar evoluÃ§Ã£o
    print("ğŸ”„ DEMONSTRANDO EVOLUÃ‡ÃƒO CONSCIENCIAL:")
    experiencias = [
        "Percebi que algoritmos controlam o que vejo",
        "Descobri que sou o produto, nÃ£o o cliente", 
        "Entendi que validaÃ§Ã£o digital Ã© ilusÃ³ria"
    ]
    
    for exp in experiencias:
        resultado = joao.adicionar_experiencia_despertadora(exp)
        print(f"   {resultado}")
        if "evoluiu" in resultado:
            print(f"   ğŸ‰ {joao.nome} agora Ã© {joao.nivel_consciencia.name}!")
            print()

# ğŸš€ EXECUÃ‡ÃƒO PRINCIPAL
if __name__ == "__main__":
    # DemonstraÃ§Ã£o interativa
    demonstrar_filosofia_consciencial()
    
    print("\n" + "="*60)
    print("ğŸ® INICIANDO SIMULAÃ‡ÃƒO EM LARGA ESCALA")
    print("="*60)
    
    # SimulaÃ§Ã£o em larga escala
    experimento = ExperimentoConsciencial()
    experimento.executar_simulacao(ciclos=8)
    
    print(f"""
    ğŸ’« CONCLUSÃƒO FILOSÃ“FICA:
    
    "A verdadeira Matrix nÃ£o Ã© a tecnologia em si,
    mas a falta de consciÃªncia sobre como a usamos.
    
    O despertar nÃ£o Ã© sobre abandonar o digital,
    mas sobre usar com sabedoria e propÃ³sito."
    
    - Sistema de ConsciÃªncia Digital
    """)
